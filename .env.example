# ===========================================
# Contrarian AI Trading Platform
# Environment Configuration Template
# ===========================================

# Database
# For local development with docker-compose
DATABASE_URL="postgresql://contrarian:contrarian_dev@localhost:5432/contrarian_ai"

# Kraken API (Story 1.3 & 3.1)
# Get your keys from: https://www.kraken.com/u/security/api
# IMPORTANT: API keys should have ONLY "Query Funds" + "Create & Modify Orders" permissions
# NEVER enable "Withdraw Funds" permission for security
KRAKEN_API_KEY="your-api-key-here"
KRAKEN_API_SECRET="your-api-secret-here"
# Private key for Kraken API (same as API_SECRET for most operations)
KRAKEN_PRIVATE_KEY="your-private-key-here"
# Sandbox mode: Set to "true" for testing (logs orders but doesn't execute)
# Set to "false" for live trading (CAUTION: real money!)
KRAKEN_SANDBOX_MODE="true"

# LunarCrush API (Story 1.4)
# Get your key from: https://lunarcrush.com/developers
LUNARCRUSH_API_KEY=""

# Telegram API (Story 1.4 - Sentiment Scraping)
# Get your credentials from: https://my.telegram.org/apps
# 1. Log in with your phone number
# 2. Create a new application
# 3. Copy the api_id and api_hash
# After setting these, run: python -m services.socials.telegram_auth
TELEGRAM_API_ID=""
TELEGRAM_API_HASH=""
TELEGRAM_PHONE=""  # With country code, e.g., +1234567890
# Optional: Custom channel list (comma-separated, without @)
# TELEGRAM_CHANNELS="CoinDesk,Cointelegraph,bitcoinmagazine"

# CryptoPanic API (Story 1.4 - News Sentiment)
# Get your API key from: https://cryptopanic.com/developers/api/
# Uses Developer v2 API: https://cryptopanic.com/api/developer/v2/posts/
# CryptoPanic aggregates crypto news and provides community sentiment votes
CRYPTOPANIC_API_KEY="your-auth-token-here"

# Google Gemini AI for Sentiment Analysis (Story 2.2)
# Get your key from: https://aistudio.google.com/app/apikey
GOOGLE_AI_API_KEY=""
GEMINI_MODEL="gemini-2.0-flash-lite"
GEMINI_TEMPERATURE="0.3"
GEMINI_MAX_TOKENS="1024"

# Next.js
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Bot Service
BOT_PORT=8000
WEB_URL="http://localhost:3000"

# Risk Management (Story 3.2 - Dynamic Risk Engine)
# ATR-based stop loss calculation parameters
RISK_ATR_PERIOD="14"
RISK_ATR_MULTIPLIER="2.0"
RISK_MAX_STOP_LOSS_PERCENTAGE="0.20"
RISK_MIN_STOP_LOSS_PERCENTAGE="0.02"
RISK_DEFAULT_PER_TRADE="0.02"

# Story 5.5: Enhanced Risk Parameters
# Tighter parameters for capital preservation
MAX_DRAWDOWN_PCT="15.0"
PER_TRADE_RISK_PCT="1.5"
MAX_SINGLE_POSITION_PCT="10.0"
MAX_CORRELATED_EXPOSURE_PCT="30.0"
CORRELATION_THRESHOLD="0.7"
RISK_ALERT_THRESHOLD_PCT="80.0"
DAILY_LOSS_LIMIT_PCT="5.0"
RISK_MAX_STOP_LOSS_PCT="15.0"
RISK_MIN_STOP_LOSS_PCT="2.0"

# Debug mode (set to "true" for verbose logging)
DEBUG="false"

# Story 5.8: Dynamic Opportunity Scanner
# Scans all Kraken USD pairs hourly to discover contrarian opportunities
SCANNER_ENABLED=true
SCANNER_MIN_VOLUME=1000000
SCANNER_UNIVERSE_SIZE=10
SCANNER_MIN_SCORE=40
# Score Weights (optional - defaults are optimized)
SCANNER_WEIGHT_RSI=15
SCANNER_WEIGHT_CAPITULATION=15
SCANNER_WEIGHT_VOLUME_SPIKE=12
SCANNER_WEIGHT_ADX=12
SCANNER_WEIGHT_BOLLINGER=12
SCANNER_WEIGHT_VWAP=6
SCANNER_WEIGHT_LIQUIDITY=10
# Technical Thresholds (optional - defaults are standard)
SCANNER_RSI_THRESHOLD=30
SCANNER_CAPITULATION_PCT=10
SCANNER_VOLUME_SPIKE_MULT=2.0
SCANNER_ADX_THRESHOLD=25

# Story 5.6: On-Chain Data Configuration
# CryptoQuant API (primary - best free tier, 100 calls/day)
# Get your key from: https://cryptoquant.com/
CRYPTOQUANT_API_KEY=your_cryptoquant_api_key
# Santiment API (backup provider)
# Get your key from: https://santiment.net/
SANTIMENT_API_KEY=your_santiment_api_key
# Glassnode API (premium provider)
# Get your key from: https://glassnode.com/
GLASSNODE_API_KEY=your_glassnode_api_key
# Cache TTL in minutes (aligns with council cycle)
ONCHAIN_CACHE_TTL_MINUTES=15
# Lookback days for historical data
ONCHAIN_LOOKBACK_DAYS=7
# Exchange flow spike multiplier (vs 7-day average)
EXCHANGE_FLOW_SPIKE_MULT=2.0
# Whale activity threshold (number of large transactions)
WHALE_ACTIVITY_THRESHOLD=100
# Funding rate extreme threshold (0.1% per 8 hours is extreme)
FUNDING_RATE_EXTREME_THRESHOLD=0.1
